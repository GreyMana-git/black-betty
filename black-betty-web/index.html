<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Gaggia Black Betty</title>
    <script type="module" src="index.ts"></script>
    <link rel="stylesheet" href="index.css" />
</head>

<body>
    <header>
        <div class="logo" id="setting-open">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANNSURBVEhLnZa7NutBFMZ3chQai07j1lt0GqFUEKWGeAB0KpfqVMIDoFO5PEDkBVwewCUNVdBQoVPNmd93sv9rJHEuvrXGzOz/nj3fvsyOXFdXV7BvolQq2ebmpp2dndny8rJkef39JlZWVmx8fNx6enpsdHRUsr8aRLG7u7uxa8Xb25tm1/mjwYGBATs5ObGdnZ2G5Gu4YSOGfX19YWtrK8RYhMPDwzA/Px+Qn56eah2VpYMsHQ8PD5L7jCwP1Wq1qhv29/ctflSwj4+PbWJiQuP19VV7Ag/rdnCGP9bX13/e39/b1NSUdXZ22urqqrEn0M/Pz9bb25spj42N2dzcnL28vNjd3Z3Nzs7ax8eHjYyM2MHBgXQ6EJbLZRlYW1tTcGF1c3MjZjBOQWavr6+1Pj8/V9mEEOQdZzswhBuuNDk5aTF2+oibHEpB1tE5OjrSvl6v2+DgoAwSkjwHcImbMdDf3y9XgF/i4BLcwwPWjphQGYRcnptIAi6SnGKxaFdXV2LmsXNwEXrv7+9au3cYRzdWxO+yiYfD0tJSDEXQmpGWB6NQKIR4kUqrUqloHd0NMzMzYW9vLzsjgwgRRLY62M4gsrQWh4eHRYA19epn9FLiRi4xey22QxoCdB4fH21jY0Ox9m9ZtyFzfEQxuvApIU9PTy0JcpBhwHdiKIYElZSTPcqATDbDGUQvtU5nkuheySC1RfYWFhZ0I2ybAQMu4yD97+LiQjMyXOdRgKzbUC7c6AdTODuMMSgX4DMPwSGDuEgN4jKHeYopeIJfNYWhoaFPBJQUTwbDg4/rrHGfGFPI/twcEOFbSqCjMeuRcxMKGKOEiC3u8JJ2d3db3jXAqxRZDDnow0uACwi2s/4XyCDxc2b+Y8P+O5BBGBAPjwklROyY/xfZS4EZz44sY5QEETPqjR8qLm123buNuowDgz5oEvEQb16gA7ks1aGB+J5Og8z3Lf85XF5eZk8PliSG2HrJeBl5MZPl7e3trAI+GUSxVqupRFJwCKM0DYBR1iQz/shlctDCEKOeaUANYoA48TPhDQTkcjmL7mrtyOrQQVKgz/CsT09PiwUyWN3e3qrVwboZLQxTkN3Y7m1xcVGsaVO8XS7xdezcDW1g9guTdXCwgupdzgAAAABJRU5ErkJggg==">
        </div>
        <span>Gaggia Black Betty</span>
        <span id="tokeninfo">0</span>
    </header>
    <div class="content">

        <div class="panel overview">
            <h1>Overview</h1>
            <div class="overview-grid">
                <div class="side-grid">
                    <div>Current temperature:</div>
                    <div class="overview-value"><span id="overview-temperature"></span>&#8451;</div>
                </div>
                <div class="side-grid">
                    <div>Current Mode:</div>
                    <div class="overview-value"><span id="overview-mode"></span></div>
                    <div>
                        <button id="overview-toggleEnable">Enable</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel temperature">
            <h1>Temperature</h1>
            <div class="panel-content">
                <div>
                    
                    <div class="side-grid">
                        <div>Current:</div><div><span id="temperature-current"></span> &#8451;</div>
                        <div>Target:</div><div><span id="temperature-target"></span> &#8451;</div>
                        <div>Low:</div><div><span id="temperature-low"></span> &#8451;</div>
                        <div>High:</div><div><span id="temperature-high"></span> &#8451;</div>
                    </div>
                </div>
                <div class="graph-wrapper">
                    <canvas class="graph" id="graph-temperature"></canvas>
                </div>
            </div>
        </div>

        <div class="panel pid">
            <h1>PID Status</h1>
            <div class="panel-content">
                <div class="side-grid">
                    <div>kp:</div><div id="pid-kp"></div>
                    <div>ki:</div><div id="pid-ki"></div>
                    <div>kd:</div><div id="pid-kd"></div>
                    <div>Input:</div><div id="pid-input"></div>
                    <div>Output:</div><div id="pid-output"></div>
                    <div>Setpoint:</div><div id="pid-setpoint"></div>
                </div>
                <div class="graph-wrapper">
                    <canvas class="graph" id="graph-output"></canvas>
                </div>
            </div>
        </div>

        <div class="panel heater">
            <h1>Heater Relay</h1>
            <div class="panel-content">
                <div class="side-grid">
                    <div>Mode:</div><div id="heater-mode"></div>
                    <div>Active:</div><div id="heater-active"></div>
                </div>
                <div class="graph-wrapper">
                    <canvas class="graph" id="graph-heater"></canvas>
                </div>
            </div>
        </div>

        <div class="panel heater">
            <h1>Health (ms in loop)</h1>
            <div class="panel-content">
                <div></div>
                <div class="graph-wrapper">
                    <canvas class="graph" id="graph-health"></canvas>
                </div>
            </div>
        </div>
    </div>

    <div id="setting-panel" class="setting-panel">
        <h1>Settings<span class="setting-close" id="setting-close">&#10006;</span></h1>
        <div class="setting-grid">
            <h2>Temperature</h2>
            <div>Low Temperature</div>
            <div><input type="text" id="setting-temperature-low"></div>
            <div>High Temperature</div>
            <div><input type="text" id="setting-temperature-high"></div>
            <button id="setting-apply-temperature">Apply</button>

            <h2>PID</h2>
            <div>kp</div>
            <div><input type="text" id="setting-pid-kp"></div>
            <div>ki</div>
            <div><input type="text" id="setting-pid-ki"></div>
            <div>kd</div>
            <div><input type="text" id="setting-pid-kd"></div>
            <button id="setting-apply-pid">Apply</button>

            <h2>System</h2>
            <button id="setting-toggle-countdown" style="float:left;"></button>
            <button id="setting-save">Save</button>
            <div style="height: 24px">&nbsp;</div>
            <button id="setting-restart">Restart</button>
        </div>
    </div>

    <div id="notify-panel" class="notify-panel">
        <div id="notify-header"></div>
        <div id="notify-message"></div>
    </div>
</body>